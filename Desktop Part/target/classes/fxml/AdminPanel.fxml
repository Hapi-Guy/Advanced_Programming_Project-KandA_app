<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<VBox spacing="0" style="-fx-background-color: #F0F2F5;" stylesheets="@../css/application.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.kna.controller.AdminPanelController">
    
    <!-- Page Header -->
    <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-background-color: white; -fx-padding: 20px 25px; -fx-border-color: #E8E8E8; -fx-border-width: 0 0 1px 0;">
        <Button onAction="#goBack" styleClass="secondary-button" text="â† Back" />
        <Label styleClass="page-title" text="âš™ï¸ Admin Panel" />
        <Region HBox.hgrow="ALWAYS" />
        <Label style="-fx-background-color: #f44336;" styleClass="badge" text="ADMIN" />
    </HBox>
    
    <!-- Admin Content -->
    <TabPane style="-fx-background-color: #F0F2F5;" VBox.vgrow="ALWAYS">
        
        <!-- Users Tab -->
        <Tab closable="false" text="ðŸ‘¥ Users">
            <VBox spacing="20" style="-fx-padding: 20px;">
                <!-- Stats Cards -->
                <HBox spacing="20">
                    <VBox alignment="CENTER" spacing="8" styleClass="stat-card" HBox.hgrow="ALWAYS">
                        <Label styleClass="stat-card-icon" text="ðŸ‘¥" />
                        <Label styleClass="stat-card-label" text="Total Users" />
                        <Label fx:id="totalUsersLabel" styleClass="stat-card-value" text="0" />
                    </VBox>
                    <VBox alignment="CENTER" spacing="8" styleClass="stat-card" HBox.hgrow="ALWAYS">
                        <Label styleClass="stat-card-icon" text="ðŸ‘¨ðŸ»â€ðŸ’»" />
                        <Label styleClass="stat-card-label" text="Admins" />
                        <Label fx:id="totalAdminsLabel" styleClass="stat-card-value" text="0" />
                    </VBox>
                    <VBox alignment="CENTER" spacing="8" styleClass="stat-card" HBox.hgrow="ALWAYS">
                        <Label styleClass="stat-card-icon" text="âœ…" />
                        <Label styleClass="stat-card-label" text="Active" />
                        <Label fx:id="activeUsersLabel" styleClass="stat-card-value" text="0" />
                    </VBox>
                </HBox>
                
                <!-- Users Table -->
                <VBox spacing="10" styleClass="card" VBox.vgrow="ALWAYS">
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Label styleClass="section-subtitle" text="User Management" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button onAction="#refreshUsers" styleClass="secondary-button" text="ðŸ”„ Refresh" />
                    </HBox>
                    <TableView fx:id="usersTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="userIdCol" prefWidth="60" text="ID" />
                            <TableColumn fx:id="userUsernameCol" prefWidth="150" text="Username" />
                            <TableColumn fx:id="userEmailCol" prefWidth="200" text="Email" />
                            <TableColumn fx:id="userCoinsCol" prefWidth="80" text="Coins" />
                            <TableColumn fx:id="userReputationCol" prefWidth="100" text="Reputation" />
                            <TableColumn fx:id="userRoleCol" prefWidth="80" text="Role" />
                            <TableColumn fx:id="userActionsCol" prefWidth="150" text="Actions" />
                        </columns>
                    </TableView>
                </VBox>
            </VBox>
        </Tab>
        
        <!-- Questions Tab -->
        <Tab closable="false" text="ðŸ“ Questions">
            <VBox spacing="20" style="-fx-padding: 20px;">
                <!-- Stats Cards -->
                <HBox spacing="20">
                    <VBox alignment="CENTER" spacing="8" styleClass="stat-card" HBox.hgrow="ALWAYS">
                        <Label styleClass="stat-card-icon" text="ðŸ“" />
                        <Label styleClass="stat-card-label" text="Total Questions" />
                        <Label fx:id="totalQuestionsLabel" styleClass="stat-card-value" text="0" />
                    </VBox>
                    <VBox alignment="CENTER" spacing="8" styleClass="stat-card" HBox.hgrow="ALWAYS">
                        <Label styleClass="stat-card-icon" text="âœ…" />
                        <Label styleClass="stat-card-label" text="Answered" />
                        <Label fx:id="answeredQuestionsLabel" style="-fx-text-fill: #4CAF50;" styleClass="stat-card-value" text="0" />
                    </VBox>
                    <VBox alignment="CENTER" spacing="8" styleClass="stat-card" HBox.hgrow="ALWAYS">
                        <Label styleClass="stat-card-icon" text="ðŸ”¥" />
                        <Label styleClass="stat-card-label" text="Urgent" />
                        <Label fx:id="urgentQuestionsLabel" style="-fx-text-fill: #FF9800;" styleClass="stat-card-value" text="0" />
                    </VBox>
                </HBox>
                
                <!-- Questions Table -->
                <VBox spacing="10" styleClass="card" VBox.vgrow="ALWAYS">
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Label styleClass="section-subtitle" text="Question Management" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button onAction="#refreshQuestions" styleClass="secondary-button" text="ðŸ”„ Refresh" />
                    </HBox>
                    <TableView fx:id="questionsTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="questionIdCol" prefWidth="60" text="ID" />
                            <TableColumn fx:id="questionTitleCol" prefWidth="250" text="Title" />
                            <TableColumn fx:id="questionCategoryCol" prefWidth="120" text="Category" />
                            <TableColumn fx:id="questionRewardCol" prefWidth="80" text="Reward" />
                            <TableColumn fx:id="questionUrgentCol" prefWidth="70" text="Urgent" />
                            <TableColumn fx:id="questionAskerCol" prefWidth="120" text="Asked By" />
                            <TableColumn fx:id="questionActionsCol" prefWidth="120" text="Actions" />
                        </columns>
                    </TableView>
                </VBox>
            </VBox>
        </Tab>
        
        <!-- Reports Tab -->
        <Tab closable="false" text="ðŸš© Reports">
            <VBox spacing="20" style="-fx-padding: 20px;">
                <!-- Stats Cards -->
                <HBox spacing="20">
                    <VBox alignment="CENTER" spacing="8" styleClass="stat-card" HBox.hgrow="ALWAYS">
                        <Label styleClass="stat-card-icon" text="ðŸš©" />
                        <Label styleClass="stat-card-label" text="Total Reports" />
                        <Label fx:id="totalReportsLabel" styleClass="stat-card-value" text="0" />
                    </VBox>
                    <VBox alignment="CENTER" spacing="8" styleClass="stat-card" HBox.hgrow="ALWAYS">
                        <Label styleClass="stat-card-icon" text="â³" />
                        <Label styleClass="stat-card-label" text="Pending" />
                        <Label fx:id="pendingReportsLabel" style="-fx-text-fill: #FF9800;" styleClass="stat-card-value" text="0" />
                    </VBox>
                    <VBox alignment="CENTER" spacing="8" styleClass="stat-card" HBox.hgrow="ALWAYS">
                        <Label styleClass="stat-card-icon" text="âœ…" />
                        <Label styleClass="stat-card-label" text="Resolved" />
                        <Label fx:id="resolvedReportsLabel" style="-fx-text-fill: #4CAF50;" styleClass="stat-card-value" text="0" />
                    </VBox>
                </HBox>
                
                <!-- Reports Table -->
                <VBox spacing="10" styleClass="card" VBox.vgrow="ALWAYS">
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Label styleClass="section-subtitle" text="Report Management" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button onAction="#refreshReports" styleClass="secondary-button" text="ðŸ”„ Refresh" />
                    </HBox>
                    <TableView fx:id="reportsTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="reportIdCol" prefWidth="60" text="ID" />
                            <TableColumn fx:id="reportTypeCol" prefWidth="100" text="Type" />
                            <TableColumn fx:id="reportReasonCol" prefWidth="200" text="Reason" />
                            <TableColumn fx:id="reportStatusCol" prefWidth="100" text="Status" />
                            <TableColumn fx:id="reportDateCol" prefWidth="120" text="Date" />
                            <TableColumn fx:id="reportActionsCol" prefWidth="150" text="Actions" />
                        </columns>
                    </TableView>
                </VBox>
            </VBox>
        </Tab>
        
    </TabPane>
</VBox>
