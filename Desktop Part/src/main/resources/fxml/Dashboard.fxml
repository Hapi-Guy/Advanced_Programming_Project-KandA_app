<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane stylesheets="@../css/application.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.kna.controller.DashboardController">

    <!-- Left Sidebar Navigation -->
    <left>
        <VBox prefWidth="240" spacing="0" style="-fx-background-color: #1E2A38;">
            <padding>
                <Insets bottom="20" left="0" right="0" top="0" />
            </padding>

            <!-- Logo Section -->
            <HBox alignment="CENTER" spacing="10" style="-fx-background-color: #1A2530; -fx-padding: 20px;">
                <Label style="-fx-font-size: 28px;" text="ðŸŽ“" />
                <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: white;" text="KnA Platform" />
            </HBox>

            <VBox spacing="5" style="-fx-padding: 15px 10px;">
                <Button alignment="CENTER_LEFT" onAction="#showHome" prefWidth="220" style="-fx-background-color: transparent; -fx-text-fill: #B0BEC5;" styleClass="nav-item" text="ðŸ   Home" />
                <Button alignment="CENTER_LEFT" onAction="#showAskQuestion" prefWidth="220" style="-fx-background-color: transparent; -fx-text-fill: #B0BEC5;" styleClass="nav-item" text="â“  Ask Question" />
                <Button alignment="CENTER_LEFT" onAction="#showMyQuestions" prefWidth="220" style="-fx-background-color: transparent; -fx-text-fill: #B0BEC5;" styleClass="nav-item" text="ðŸ“  My Questions" />
                <Button alignment="CENTER_LEFT" onAction="#showMyAnswers" prefWidth="220" style="-fx-background-color: transparent; -fx-text-fill: #B0BEC5;" styleClass="nav-item" text="ðŸ’¬  My Answers" />
                <Button alignment="CENTER_LEFT" onAction="#showLeaderboard" prefWidth="220" style="-fx-background-color: transparent; -fx-text-fill: #B0BEC5;" styleClass="nav-item" text="ðŸ†  Leaderboard" />
                <Button alignment="CENTER_LEFT" onAction="#showCoinPurchase" prefWidth="220" style="-fx-background-color: transparent; -fx-text-fill: #B0BEC5;" styleClass="nav-item" text="ðŸ›’  Buy Coins" />
            </VBox>

            <Separator style="-fx-background-color: #37474F;" />

            <VBox spacing="5" style="-fx-padding: 15px 10px;">
                <Button fx:id="adminPanelButton" alignment="CENTER_LEFT" onAction="#showAdminPanel" prefWidth="220" style="-fx-background-color: transparent; -fx-text-fill: #B0BEC5;" styleClass="nav-item" text="âš™ï¸  Admin Panel" visible="false" />
            </VBox>

            <Region VBox.vgrow="ALWAYS" />

            <VBox spacing="5" style="-fx-padding: 15px 10px;">
                <Button alignment="CENTER_LEFT" onAction="#handleLogout" prefWidth="220" style="-fx-background-color: #D32F2F; -fx-text-fill: white; -fx-background-radius: 8px; -fx-padding: 12px 20px;" text="ðŸšª  Logout" />
            </VBox>
        </VBox>
    </left>

    <!-- Main Content Area -->
    <center>
        <VBox style="-fx-background-color: #F0F2F5;">
            <!-- Top Bar -->
            <HBox alignment="CENTER_LEFT" prefHeight="85.0" prefWidth="875.0" spacing="20" style="-fx-background-color: white; -fx-padding: 15px 25px; -fx-border-color: #E8E8E8; -fx-border-width: 0 0 1px 0;">
                
                <Label styleClass="page-title" text="Dashboard" />

                <Region HBox.hgrow="ALWAYS" />

                <!-- Search Bar -->
                <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #F5F5F5; -fx-background-radius: 25px; -fx-padding: 8px 18px;" minWidth="200" prefWidth="280">
                    <TextField fx:id="searchField" prefWidth="200" promptText="Search questions..." style="-fx-background-color: transparent; -fx-border-width: 0;" />
                    <Button onAction="#handleSearch" style="-fx-background-color: transparent; -fx-cursor: hand;" text="ðŸ”" />
                </HBox>

                <!-- Coin Balance -->
                <HBox alignment="CENTER" spacing="6" styleClass="coin-display" minWidth="80">
                    <Label styleClass="coin-icon-small" text="ðŸ’°" />
                    <Label fx:id="coinLabel" styleClass="badge-text" text="100" minWidth="40" />
                </HBox>

                <!-- Reputation -->
                <HBox alignment="CENTER" spacing="6" styleClass="reputation-display" minWidth="70">
                    <Label style="-fx-font-size: 14px;" text="â­" />
                    <Label fx:id="reputationLabel" style="-fx-font-weight: bold; -fx-text-fill: #2E7D32;" text="0" minWidth="40" />
                </HBox>

                <!-- Notifications -->
                <StackPane minWidth="45" minHeight="45">
                    <Button onAction="#handleNotifications" style="-fx-background-color: #F5F5F5; -fx-background-radius: 50%; -fx-min-width: 45px; -fx-min-height: 45px; -fx-max-width: 45px; -fx-max-height: 45px; -fx-font-size: 20px; -fx-cursor: hand; -fx-border-color: #E0E0E0; -fx-border-radius: 50%; -fx-border-width: 1px; -fx-font-family: 'Segoe UI Symbol';" textFill="#ede9e9" />
                    <Label fx:id="notificationBadge" styleClass="notification-badge" visible="false" StackPane.alignment="TOP_RIGHT" />
               <Label text="ðŸ””">
                  <font>
                     <Font size="36.0" />
                  </font>
               </Label>
                </StackPane>

                <!-- Profile -->
                <Button fx:id="profileButton" onAction="#handleProfile" style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-background-radius: 20px; -fx-padding: 8px 18px; -fx-font-weight: bold;" minWidth="100" maxWidth="200" />
            </HBox>

            <!-- Content Area -->
            <StackPane fx:id="contentArea" style="-fx-background-color: #F0F2F5;" VBox.vgrow="ALWAYS">
                <!-- Default: Question Feed -->
                <ScrollPane fx:id="homeScrollPane" fitToWidth="true" style="-fx-background-color: transparent; -fx-background: transparent;">
                    <VBox spacing="20" style="-fx-background-color: transparent;">
                        <padding>
                            <Insets bottom="25" left="25" right="25" top="25" />
                        </padding>
                        
                        <!-- Stats Cards Row -->
                        <HBox prefHeight="118.0" prefWidth="824.0" spacing="20">
                            <VBox alignment="CENTER" spacing="8" styleClass="stat-card" HBox.hgrow="ALWAYS">
                                <Label styleClass="stat-card-icon" text="ðŸ“‹" />
                                <Label styleClass="stat-card-label" text="Total Questions" />
                                <Label fx:id="totalQuestionsLabel" styleClass="stat-card-value" text="0" />
                            </VBox>
                            <VBox alignment="CENTER" spacing="8" styleClass="stat-card" HBox.hgrow="ALWAYS">
                                <Label styleClass="stat-card-icon" text="âœ…" />
                                <Label styleClass="stat-card-label" text="Answered" />
                                <Label fx:id="answeredQuestionsLabel" styleClass="stat-card-value" text="0" />
                            </VBox>
                            <VBox alignment="CENTER" spacing="8" styleClass="stat-card" HBox.hgrow="ALWAYS">
                                <Label styleClass="stat-card-icon" text="â³" />
                                <Label styleClass="stat-card-label" text="Pending" />
                                <Label fx:id="pendingQuestionsLabel" styleClass="stat-card-value" text="0" />
                            </VBox>
                            <VBox alignment="CENTER" spacing="8" styleClass="stat-card" HBox.hgrow="ALWAYS">
                                <Label styleClass="stat-card-icon" text="ðŸ”¥" />
                                <Label styleClass="stat-card-label" text="Urgent" />
                                <Label fx:id="urgentQuestionsLabel" styleClass="stat-card-value" text="0" />
                            </VBox>
                        </HBox>
                        
                        <!-- Filters Card -->
                        <VBox spacing="15" styleClass="card">
                            <HBox alignment="CENTER_LEFT" spacing="20">
                                <Label styleClass="section-subtitle" text="ðŸ” Filters" />
                                <Region HBox.hgrow="ALWAYS" />
                            </HBox>
                            <HBox alignment="CENTER_LEFT" spacing="20">
                                <HBox alignment="CENTER_LEFT" spacing="8">
                                    <Label styleClass="filter-label" text="Category:" />
                                    <ComboBox fx:id="categoryFilter" onAction="#applyFilters" prefWidth="180" styleClass="combo-box" />
                                </HBox>
                                <HBox alignment="CENTER_LEFT" spacing="8">
                                    <CheckBox fx:id="urgentOnlyCheckbox" onAction="#applyFilters" styleClass="check-box" />
                                    <Label style="-fx-font-size: 13px;" text="ðŸ”¥ Show Urgent Questions Only" />
                                </HBox>
                                <HBox alignment="CENTER_LEFT" spacing="8">
                                    <CheckBox fx:id="unansweredOnlyCheckbox" onAction="#applyFilters" styleClass="check-box" />
                                    <Label style="-fx-font-size: 13px;" text="â“ Show Unanswered Questions Only" />
                                </HBox>
                            </HBox>
                        </VBox>

                        <!-- Questions Section Header -->
                        <HBox alignment="CENTER_LEFT">
                            <Label styleClass="section-title" text="ðŸ“š Recent Questions" />
                        </HBox>

                        <!-- Question Feed -->
                        <VBox fx:id="questionFeedContainer" spacing="15" />
                    </VBox>
                </ScrollPane>
            </StackPane>
        </VBox>
    </center>
</BorderPane>
