<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.kna.controller.DashboardController"
            stylesheets="@../css/application.css">
    
    <!-- Top Bar -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" styleClass="top-bar" prefHeight="60">
            <padding>
                <Insets top="10" right="20" bottom="10" left="20"/>
            </padding>
            
            <Label text="KnA" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2196F3;"/>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <!-- Search Bar -->
            <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #F5F5F5; -fx-background-radius: 20px; -fx-padding: 8px 15px;">
                <TextField fx:id="searchField" promptText="Search questions..." 
                          style="-fx-background-color: transparent; -fx-border-width: 0;" prefWidth="250"/>
                <Button text="ðŸ”" onAction="#handleSearch" style="-fx-background-color: transparent;"/>
            </HBox>
            
            <!-- Coin Balance -->
            <HBox alignment="CENTER" spacing="5" styleClass="coin-display">
                <Label text="ðŸ’°"/>
                <Label fx:id="coinLabel" text="100"/>
            </HBox>
            
            <!-- Reputation -->
            <HBox alignment="CENTER" spacing="5" styleClass="reputation-display">
                <Label text="â­"/>
                <Label fx:id="reputationLabel" text="0"/>
            </HBox>
            
            <!-- Notifications -->
            <StackPane>
                <Button text="ðŸ””" onAction="#handleNotifications" 
                       style="-fx-background-color: transparent; -fx-font-size: 20px;"/>
                <Label fx:id="notificationBadge" styleClass="notification-badge" 
                      visible="false" StackPane.alignment="TOP_RIGHT"/>
            </StackPane>
            
            <!-- Profile -->
            <Button fx:id="profileButton" onAction="#handleProfile" 
                   style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-background-radius: 20px; -fx-padding: 8px 15px;"/>
        </HBox>
    </top>
    
    <!-- Left Sidebar Navigation -->
    <left>
        <VBox styleClass="nav-sidebar" prefWidth="220" spacing="5">
            <padding>
                <Insets top="20" right="0" bottom="20" left="0"/>
            </padding>
            
            <Button text="ðŸ  Home" styleClass="nav-item" onAction="#showHome" prefWidth="220" alignment="CENTER_LEFT"/>
            <Button text="â“ Ask Question" styleClass="nav-item" onAction="#showAskQuestion" prefWidth="220" alignment="CENTER_LEFT"/>
            <Button text="ðŸ“ My Questions" styleClass="nav-item" onAction="#showMyQuestions" prefWidth="220" alignment="CENTER_LEFT"/>
            <Button text="ðŸ’¬ My Answers" styleClass="nav-item" onAction="#showMyAnswers" prefWidth="220" alignment="CENTER_LEFT"/>
            <Button text="ðŸ† Leaderboard" styleClass="nav-item" onAction="#showLeaderboard" prefWidth="220" alignment="CENTER_LEFT"/>
            <Button text="ðŸ›’ Buy Coins" styleClass="nav-item" onAction="#showCoinPurchase" prefWidth="220" alignment="CENTER_LEFT"/>
            
            <Separator/>
            
            <Button fx:id="adminPanelButton" text="âš™ï¸ Admin Panel" styleClass="nav-item" 
                   onAction="#showAdminPanel" prefWidth="220" alignment="CENTER_LEFT" visible="false"/>
            
            <Region VBox.vgrow="ALWAYS"/>
            
            <Button text="ðŸšª Logout" styleClass="nav-item" onAction="#handleLogout" 
                   prefWidth="220" alignment="CENTER_LEFT" style="-fx-background-color: #D32F2F;"/>
        </VBox>
    </left>
    
    <!-- Main Content Area -->
    <center>
        <StackPane fx:id="contentArea" style="-fx-background-color: #F5F5F5;">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            
            <!-- Default: Question Feed -->
            <ScrollPane fitToWidth="true" fitToHeight="true">
                <VBox spacing="20">
                    <!-- Filters -->
                    <HBox alignment="CENTER_LEFT" spacing="15" styleClass="card">
                        <Label text="Filters:" style="-fx-font-weight: bold;"/>
                        
                        <Label text="Category:"/>
                        <ComboBox fx:id="categoryFilter" onAction="#applyFilters" prefWidth="150"/>
                        
                        <CheckBox fx:id="urgentOnlyCheckbox" text="Urgent Only" onAction="#applyFilters"/>
                        <CheckBox fx:id="unansweredOnlyCheckbox" text="Unanswered Only" onAction="#applyFilters"/>
                        
                        <Region HBox.hgrow="ALWAYS"/>
                        
                        <Button text="ðŸ”„ Refresh" onAction="#refreshFeed"/>
                    </HBox>
                    
                    <!-- Question Feed -->
                    <VBox fx:id="questionFeedContainer" spacing="15"/>
                </VBox>
            </ScrollPane>
        </StackPane>
    </center>
</BorderPane>
