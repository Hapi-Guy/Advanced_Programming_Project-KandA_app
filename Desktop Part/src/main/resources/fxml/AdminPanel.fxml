<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.kna.controller.AdminPanelController"
            styleClass="root-pane">
    
    <!-- Top Bar -->
    <top>
        <HBox styleClass="top-bar" alignment="CENTER_LEFT" spacing="15">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>
            
            <Button fx:id="backButton" text="â† Back" styleClass="secondary-button" onAction="#goBack"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="ðŸ›¡ï¸ Admin Panel" styleClass="page-title"/>
            <Region HBox.hgrow="ALWAYS"/>
        </HBox>
    </top>
    
    <!-- Main Content -->
    <center>
        <VBox spacing="0" styleClass="content-container">
            
            <!-- Tab Navigation -->
            <HBox styleClass="filter-tabs" spacing="10" alignment="CENTER_LEFT">
                <padding>
                    <Insets top="15" right="20" bottom="15" left="20"/>
                </padding>
                
                <Button fx:id="dashboardTabBtn" text="Dashboard" styleClass="filter-tab,active-tab" onAction="#showDashboard"/>
                <Button fx:id="usersTabBtn" text="Users" styleClass="filter-tab" onAction="#showUsers"/>
                <Button fx:id="questionsTabBtn" text="Questions" styleClass="filter-tab" onAction="#showQuestions"/>
                <Button fx:id="transactionsTabBtn" text="Transactions" styleClass="filter-tab" onAction="#showTransactions"/>
                <Button fx:id="settingsTabBtn" text="Settings" styleClass="filter-tab" onAction="#showSettings"/>
            </HBox>
            
            <!-- Content Area -->
            <StackPane VBox.vgrow="ALWAYS">
                
                <!-- Dashboard View -->
                <ScrollPane fx:id="dashboardPane" fitToWidth="true" styleClass="scroll-pane">
                    <VBox spacing="20" styleClass="admin-content">
                        <padding>
                            <Insets top="20" right="30" bottom="20" left="30"/>
                        </padding>
                        
                        <Label text="System Overview" styleClass="section-title"/>
                        
                        <!-- Stats Grid -->
                        <GridPane hgap="20" vgap="20">
                            <!-- Total Users -->
                            <VBox spacing="10" styleClass="stat-card" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <Label text="ðŸ‘¥" style="-fx-font-size: 32px;"/>
                                <Label text="Total Users" styleClass="stat-card-label"/>
                                <Label fx:id="totalUsersLabel" text="0" styleClass="stat-card-value"/>
                            </VBox>
                            
                            <!-- Total Questions -->
                            <VBox spacing="10" styleClass="stat-card" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <Label text="â“" style="-fx-font-size: 32px;"/>
                                <Label text="Total Questions" styleClass="stat-card-label"/>
                                <Label fx:id="totalQuestionsLabel" text="0" styleClass="stat-card-value"/>
                            </VBox>
                            
                            <!-- Total Answers -->
                            <VBox spacing="10" styleClass="stat-card" GridPane.columnIndex="2" GridPane.rowIndex="0">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <Label text="ðŸ’¬" style="-fx-font-size: 32px;"/>
                                <Label text="Total Answers" styleClass="stat-card-label"/>
                                <Label fx:id="totalAnswersLabel" text="0" styleClass="stat-card-value"/>
                            </VBox>
                            
                            <!-- Total Coins in System -->
                            <VBox spacing="10" styleClass="stat-card" GridPane.columnIndex="0" GridPane.rowIndex="1">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <Label text="ðŸ’°" style="-fx-font-size: 32px;"/>
                                <Label text="Total Coins" styleClass="stat-card-label"/>
                                <Label fx:id="totalCoinsLabel" text="0" styleClass="stat-card-value"/>
                            </VBox>
                            
                            <!-- Transactions Today -->
                            <VBox spacing="10" styleClass="stat-card" GridPane.columnIndex="1" GridPane.rowIndex="1">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <Label text="ðŸ’³" style="-fx-font-size: 32px;"/>
                                <Label text="Transactions Today" styleClass="stat-card-label"/>
                                <Label fx:id="transactionsTodayLabel" text="0" styleClass="stat-card-value"/>
                            </VBox>
                            
                            <!-- Active Users -->
                            <VBox spacing="10" styleClass="stat-card" GridPane.columnIndex="2" GridPane.rowIndex="1">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <Label text="âœ“" style="-fx-font-size: 32px;"/>
                                <Label text="Active Users" styleClass="stat-card-label"/>
                                <Label fx:id="activeUsersLabel" text="0" styleClass="stat-card-value"/>
                            </VBox>
                        </GridPane>
                        
                        <!-- Quick Actions -->
                        <VBox spacing="15" styleClass="card">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            
                            <Label text="Quick Actions" styleClass="section-title"/>
                            <Separator/>
                            
                            <HBox spacing="15">
                                <Button text="Create Announcement" styleClass="primary-button" onAction="#createAnnouncement"/>
                                <Button text="Refresh Stats" styleClass="secondary-button" onAction="#refreshStats"/>
                                <Button text="View Reports" styleClass="secondary-button" onAction="#viewReports"/>
                            </HBox>
                        </VBox>
                        
                    </VBox>
                </ScrollPane>
                
                <!-- Users View -->
                <ScrollPane fx:id="usersPane" fitToWidth="true" styleClass="scroll-pane" managed="false" visible="false">
                    <VBox spacing="15" styleClass="admin-content">
                        <padding>
                            <Insets top="20" right="30" bottom="20" left="30"/>
                        </padding>
                        
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Label text="User Management" styleClass="section-title"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="Show Passwords" styleClass="warning-button" onAction="#showPasswords"/>
                            <TextField fx:id="userSearchField" promptText="Search users..." prefWidth="250"/>
                            <Button text="Search" styleClass="secondary-button" onAction="#searchUsers"/>
                        </HBox>
                        
                        <TableView fx:id="usersTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="userIdCol" text="ID" prefWidth="60"/>
                                <TableColumn fx:id="userNameCol" text="Name" prefWidth="150"/>
                                <TableColumn fx:id="userEmailCol" text="Email" prefWidth="200"/>
                                <TableColumn fx:id="userPasswordCol" text="Password" prefWidth="120" visible="false"/>
                                <TableColumn fx:id="userDeptCol" text="Department" prefWidth="100"/>
                                <TableColumn fx:id="userCoinsCol" text="Coins" prefWidth="80"/>
                                <TableColumn fx:id="userReputationCol" text="Reputation" prefWidth="100"/>
                                <TableColumn fx:id="userStatusCol" text="Status" prefWidth="80"/>
                                <TableColumn fx:id="userActionsCol" text="Actions" prefWidth="150"/>
                            </columns>
                        </TableView>
                        
                    </VBox>
                </ScrollPane>
                
                <!-- Questions View -->
                <ScrollPane fx:id="questionsPane" fitToWidth="true" styleClass="scroll-pane" managed="false" visible="false">
                    <VBox spacing="15" styleClass="admin-content">
                        <padding>
                            <Insets top="20" right="30" bottom="20" left="30"/>
                        </padding>
                        
                        <Label text="Question Management" styleClass="section-title"/>
                        
                        <TableView fx:id="questionsTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="questionIdCol" text="ID" prefWidth="60"/>
                                <TableColumn fx:id="questionTitleCol" text="Title" prefWidth="300"/>
                                <TableColumn fx:id="questionCategoryCol" text="Category" prefWidth="100"/>
                                <TableColumn fx:id="questionUserCol" text="Asked By" prefWidth="150"/>
                                <TableColumn fx:id="questionAnswersCol" text="Answers" prefWidth="80"/>
                                <TableColumn fx:id="questionDateCol" text="Date" prefWidth="120"/>
                                <TableColumn fx:id="questionActionsCol" text="Actions" prefWidth="120"/>
                            </columns>
                        </TableView>
                        
                    </VBox>
                </ScrollPane>
                
                <!-- Transactions View -->
                <ScrollPane fx:id="transactionsPane" fitToWidth="true" styleClass="scroll-pane" managed="false" visible="false">
                    <VBox spacing="15" styleClass="admin-content">
                        <padding>
                            <Insets top="20" right="30" bottom="20" left="30"/>
                        </padding>
                        
                        <Label text="Transaction History" styleClass="section-title"/>
                        
                        <TableView fx:id="transactionsTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="transactionIdCol" text="ID" prefWidth="60"/>
                                <TableColumn fx:id="transactionUserCol" text="User" prefWidth="150"/>
                                <TableColumn fx:id="transactionTypeCol" text="Type" prefWidth="120"/>
                                <TableColumn fx:id="transactionAmountCol" text="Amount" prefWidth="100"/>
                                <TableColumn fx:id="transactionRefCol" text="Reference" prefWidth="200"/>
                                <TableColumn fx:id="transactionDateCol" text="Date" prefWidth="150"/>
                            </columns>
                        </TableView>
                        
                    </VBox>
                </ScrollPane>
                
                <!-- Settings View -->
                <ScrollPane fx:id="settingsPane" fitToWidth="true" styleClass="scroll-pane" managed="false" visible="false">
                    <VBox spacing="20" styleClass="admin-content">
                        <padding>
                            <Insets top="20" right="30" bottom="20" left="30"/>
                        </padding>
                        
                        <Label text="System Settings" styleClass="section-title"/>
                        
                        <!-- Coin Rates -->
                        <VBox spacing="15" styleClass="card">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            
                            <Label text="Coin Pricing" styleClass="section-subtitle"/>
                            <Separator/>
                            
                            <GridPane hgap="15" vgap="15">
                                <Label text="Base Question Cost:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                <TextField fx:id="baseQuestionCostField" text="20" prefWidth="100" 
                                          GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                                
                                <Label text="Urgent Question Cost:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                <TextField fx:id="urgentQuestionCostField" text="30" prefWidth="100"
                                          GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                                
                                <Label text="Starting Coins:" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                <TextField fx:id="startingCoinsField" text="100" prefWidth="100"
                                          GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                            </GridPane>
                            
                            <Button text="Save Coin Settings" styleClass="primary-button" onAction="#saveCoinSettings"/>
                        </VBox>
                        
                        <!-- Reputation Settings -->
                        <VBox spacing="15" styleClass="card">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            
                            <Label text="Reputation Settings" styleClass="section-subtitle"/>
                            <Separator/>
                            
                            <GridPane hgap="15" vgap="15">
                                <Label text="Points per Upvote:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                <TextField fx:id="upvotePointsField" text="10" prefWidth="100"
                                          GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                                
                                <Label text="Points per Accepted Answer:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                <TextField fx:id="acceptedPointsField" text="50" prefWidth="100"
                                          GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                            </GridPane>
                            
                            <Button text="Save Reputation Settings" styleClass="primary-button" onAction="#saveReputationSettings"/>
                        </VBox>
                        
                        <!-- System Limits -->
                        <VBox spacing="15" styleClass="card">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            
                            <Label text="System Limits" styleClass="section-subtitle"/>
                            <Separator/>
                            
                            <GridPane hgap="15" vgap="15">
                                <Label text="Max Unevaluated Questions:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                <TextField fx:id="maxUnevaluatedField" text="5" prefWidth="100"
                                          GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                            </GridPane>
                            
                            <Button text="Save System Limits" styleClass="primary-button" onAction="#saveSystemLimits"/>
                        </VBox>
                        
                    </VBox>
                </ScrollPane>
                
            </StackPane>
            
        </VBox>
    </center>
    
</BorderPane>
