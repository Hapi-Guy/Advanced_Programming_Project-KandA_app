<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<ScrollPane fitToWidth="true" stylesheets="@../css/application.css" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.kna.controller.ProfileController" style="-fx-background-color: #F0F2F5; -fx-background: #F0F2F5;">
    <VBox spacing="0" style="-fx-background-color: #F0F2F5;">
        
        <!-- Page Header -->
        <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-background-color: white; -fx-padding: 20px 25px; -fx-border-color: #E8E8E8; -fx-border-width: 0 0 1px 0;">
            <Button text="â†" onAction="#goBack" styleClass="secondary-button" style="-fx-font-size: 16px;"/>
            <Label text="ðŸ‘¤ My Profile" styleClass="page-title"/>
            <Region HBox.hgrow="ALWAYS"/>
        </HBox>
        
        <VBox spacing="25" style="-fx-padding: 25px;">
            
            <!-- Profile Header Card -->
            <HBox spacing="25" styleClass="card" alignment="CENTER_LEFT">
                <!-- Avatar -->
                <VBox alignment="CENTER" styleClass="profile-avatar">
                    <Label fx:id="avatarLabel" text="?" style="-fx-font-size: 42px; -fx-font-weight: bold; -fx-text-fill: #2196F3;"/>
                </VBox>
                
                <!-- User Info -->
                <VBox spacing="8" HBox.hgrow="ALWAYS">
                    <Label fx:id="usernameDisplayLabel" text="Username" styleClass="profile-name"/>
                    <Label fx:id="emailDisplayLabel" text="email@example.com" styleClass="profile-email"/>
                    <HBox spacing="5">
                        <Label fx:id="roleBadge" text="USER" styleClass="badge"/>
                    </HBox>
                </VBox>
                
                <!-- Stats -->
                <HBox spacing="30">
                    <VBox alignment="CENTER" spacing="4">
                        <Label text="ðŸ’°" style="-fx-font-size: 24px;"/>
                        <Label fx:id="coinBalanceLabel" text="0" styleClass="stat-card-value"/>
                        <Label text="Coins" styleClass="stat-label"/>
                    </VBox>
                    <VBox alignment="CENTER" spacing="4">
                        <Label text="â­" style="-fx-font-size: 24px;"/>
                        <Label fx:id="reputationLabel" text="0" styleClass="stat-card-value"/>
                        <Label text="Reputation" styleClass="stat-label"/>
                    </VBox>
                </HBox>
            </HBox>
            
            <!-- Activity Stats -->
            <VBox spacing="15" styleClass="card">
                <Label text="ðŸ“Š Activity Statistics" styleClass="section-subtitle"/>
                <HBox spacing="40">
                    <VBox spacing="4">
                        <Label text="Questions Asked" styleClass="stat-label"/>
                        <Label fx:id="questionsAskedLabel" text="0" styleClass="stat-value-large"/>
                    </VBox>
                    <VBox spacing="4">
                        <Label text="Answers Given" styleClass="stat-label"/>
                        <Label fx:id="answersGivenLabel" text="0" styleClass="stat-value-large"/>
                    </VBox>
                    <VBox spacing="4">
                        <Label text="Accepted Answers" styleClass="stat-label"/>
                        <Label fx:id="acceptedAnswersLabel" text="0" styleClass="stat-value-large" style="-fx-text-fill: #4CAF50;"/>
                    </VBox>
                    <VBox spacing="4">
                        <Label text="Member Since" styleClass="stat-label"/>
                        <Label fx:id="memberSinceLabel" text="-" styleClass="stat-value-large" style="-fx-font-size: 16px;"/>
                    </VBox>
                </HBox>
            </VBox>
            
            <!-- Edit Profile Section -->
            <VBox spacing="20" styleClass="card">
                <Label text="âœï¸ Edit Profile" styleClass="section-subtitle"/>
                
                <HBox spacing="30">
                    <VBox spacing="8" HBox.hgrow="ALWAYS">
                        <Label text="Username" styleClass="input-label"/>
                        <TextField fx:id="usernameField" promptText="Username" styleClass="input-field"/>
                    </VBox>
                    <VBox spacing="8" HBox.hgrow="ALWAYS">
                        <Label text="Email" styleClass="input-label"/>
                        <TextField fx:id="emailField" promptText="Email" styleClass="input-field"/>
                    </VBox>
                </HBox>
                
                <HBox alignment="CENTER_RIGHT">
                    <Button text="Update Profile" onAction="#updateProfile" styleClass="primary-button"/>
                </HBox>
            </VBox>
            
            <!-- Change Password Section -->
            <VBox spacing="20" styleClass="card">
                <Label text="ðŸ” Change Password" styleClass="section-subtitle"/>
                
                <HBox spacing="30">
                    <VBox spacing="8" HBox.hgrow="ALWAYS">
                        <Label text="Current Password" styleClass="input-label"/>
                        <PasswordField fx:id="currentPasswordField" promptText="Enter current password" styleClass="input-field"/>
                    </VBox>
                    <VBox spacing="8" HBox.hgrow="ALWAYS">
                        <Label text="New Password" styleClass="input-label"/>
                        <PasswordField fx:id="newPasswordField" promptText="Enter new password" styleClass="input-field"/>
                    </VBox>
                    <VBox spacing="8" HBox.hgrow="ALWAYS">
                        <Label text="Confirm New Password" styleClass="input-label"/>
                        <PasswordField fx:id="confirmPasswordField" promptText="Confirm new password" styleClass="input-field"/>
                    </VBox>
                </HBox>
                
                <HBox alignment="CENTER_RIGHT">
                    <Button text="Change Password" onAction="#changePassword" styleClass="warning-button"/>
                </HBox>
            </VBox>
            
            <!-- Status Messages -->
            <Label fx:id="statusLabel" wrapText="true"/>
            
        </VBox>
    </VBox>
</ScrollPane>
